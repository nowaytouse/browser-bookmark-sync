# Browser Bookmark Sync - é¡¹ç›®æ€»ç»“

## é¡¹ç›®æ¦‚è¿°

ä¸€ä¸ªå¯é çš„è·¨æµè§ˆå™¨ä¹¦ç­¾åŒæ­¥å·¥å…·ï¼Œä½¿ç”¨ Rust å¼€å‘ï¼Œæ”¯æŒ Waterfoxã€Safariã€Brave å’Œ Firefox Nightly å››ä¸ªæµè§ˆå™¨ã€‚

## æ ¸å¿ƒç‰¹æ€§

### âœ… å·²å®ç°åŠŸèƒ½

1. **å¤šæµè§ˆå™¨æ”¯æŒ**
   - Safari (macOS) - å®Œæ•´æ”¯æŒï¼ˆä¹¦ç­¾ + å†å²è®°å½• 6155æ¡ + é˜…è¯»åˆ—è¡¨ï¼‰
   - Brave (macOS) - å®Œæ•´æ”¯æŒï¼ˆä¹¦ç­¾ + å†å²è®°å½•ï¼‰
   - Brave Nightly (macOS) - å®Œæ•´æ”¯æŒï¼ˆä¹¦ç­¾ + å†å²è®°å½•ï¼‰
   - Chrome (macOS) - å®Œæ•´æ”¯æŒï¼ˆä¹¦ç­¾ + å†å²è®°å½•ï¼‰
   - Waterfox (macOS) - å®Œæ•´æ”¯æŒï¼ˆä¹¦ç­¾ + å†å²è®°å½• 6276æ¡ï¼Œå¤šé…ç½®æ–‡ä»¶ï¼‰
   - Firefox Nightly (macOS) - å®Œæ•´æ”¯æŒï¼ˆä¹¦ç­¾ + å†å²è®°å½•ï¼‰

2. **ä¹¦ç­¾åŒæ­¥** â­
   - æ™ºèƒ½å»é‡ï¼ˆåŸºäº URL å“ˆå¸Œï¼‰
   - å¤šé…ç½®æ–‡ä»¶æ”¯æŒï¼ˆWaterfox: 25,040ä¸ªä¹¦ç­¾ï¼‰
   - è‡ªåŠ¨å¤‡ä»½
   - åŒå‘åŒæ­¥

3. **å†å²è®°å½•åŒæ­¥** ğŸ†•
   - æ”¯æŒ Waterfoxã€Firefox Nightlyã€Braveã€Chrome
   - å¯æŒ‰å¤©æ•°è¿‡æ»¤ï¼ˆå¦‚æœ€è¿‘7å¤©ã€30å¤©ï¼‰
   - æ™ºèƒ½å»é‡å’Œåˆå¹¶
   - æŒ‰è®¿é—®æ—¶é—´æ’åº
   - SQLiteåªè¯»æ¨¡å¼ï¼ˆé¿å…æµè§ˆå™¨é”å®šï¼‰

4. **é˜…è¯»åˆ—è¡¨åŒæ­¥** ğŸ†•
   - æ”¯æŒ Safari Reading List
   - æ™ºèƒ½å»é‡
   - æŒ‰æ·»åŠ æ—¶é—´æ’åº

5. **å®šæ—¶åŒæ­¥**
   - æ”¯æŒ cron è¡¨è¾¾å¼é…ç½®
   - åå°å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼
   - çµæ´»çš„æ—¶é—´é—´éš”è®¾ç½®

6. **ä¸‰é‡éªŒè¯æœºåˆ¶**
   - **åŒæ­¥å‰éªŒè¯**: æ£€æµ‹æµè§ˆå™¨å¯ç”¨æ€§
   - **åŒæ­¥ä¸­éªŒè¯**: éªŒè¯ä¹¦ç­¾æ•°æ®ç»“æ„
   - **åŒæ­¥åéªŒè¯**: ç¡®è®¤åŒæ­¥æˆåŠŸ

7. **å®‰å…¨ä¿éšœ**
   - è‡ªåŠ¨å¤‡ä»½ï¼ˆæ¯æ¬¡åŒæ­¥å‰ï¼‰
   - å¹²è¿è¡Œæ¨¡å¼ï¼ˆé¢„è§ˆä¸ä¿®æ”¹ï¼‰
   - å®Œæ•´é”™è¯¯å¤„ç†
   - åŸå­æ€§æ“ä½œ
   - SQLiteäº‹åŠ¡æ”¯æŒ

8. **æ™ºèƒ½åŠŸèƒ½**
   - URL å»é‡
   - ä¹¦ç­¾/å†å²/é˜…è¯»åˆ—è¡¨åˆå¹¶
   - æ–‡ä»¶å¤¹ç»“æ„ä¿ç•™
   - æŒ‰æ ‡é¢˜/æ—¶é—´æ’åº

## æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ

- **è¯­è¨€**: Rust (Edition 2021)
- **å¼‚æ­¥è¿è¡Œæ—¶**: Tokio
- **CLI æ¡†æ¶**: Clap 4.5
- **æ—¥å¿—**: Tracing + Tracing-subscriber
- **å®šæ—¶ä»»åŠ¡**: Tokio-cron-scheduler
- **åºåˆ—åŒ–**: Serde + Serde JSON
- **macOS æ”¯æŒ**: Plist

### é¡¹ç›®ç»“æ„

```
browser-bookmark-sync/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs           # CLI å…¥å£å’Œå‘½ä»¤è·¯ç”±
â”‚   â”œâ”€â”€ browsers.rs       # æµè§ˆå™¨é€‚é…å™¨å®ç°
â”‚   â”œâ”€â”€ sync.rs           # åŒæ­¥å¼•æ“æ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ scheduler.rs      # å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨
â”‚   â””â”€â”€ validator.rs      # éªŒè¯æŠ¥å‘Šç”Ÿæˆ
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ integration_test.rs  # é›†æˆæµ‹è¯•
â”œâ”€â”€ examples/
â”‚   â””â”€â”€ quick_start.sh    # å¿«é€Ÿå¼€å§‹è„šæœ¬
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ ci.yml        # CI/CD é…ç½®
â”œâ”€â”€ Cargo.toml            # é¡¹ç›®é…ç½®
â”œâ”€â”€ README.md             # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ USAGE.md              # ä½¿ç”¨æŒ‡å—
â””â”€â”€ .gitignore            # Git å¿½ç•¥è§„åˆ™
```

### æ ¸å¿ƒæ¨¡å—

#### 1. Browser Adapters (browsers.rs)

æ¯ä¸ªæµè§ˆå™¨å®ç° `BrowserAdapter` traitï¼š

```rust
pub trait BrowserAdapter {
    fn browser_type(&self) -> BrowserType;
    fn detect_bookmark_path(&self) -> Result<PathBuf>;
    fn read_bookmarks(&self) -> Result<Vec<Bookmark>>;
    fn write_bookmarks(&self, bookmarks: &[Bookmark]) -> Result<()>;
    fn backup_bookmarks(&self) -> Result<PathBuf>;
    fn validate_bookmarks(&self, bookmarks: &[Bookmark]) -> Result<bool>;
}
```

#### 2. Sync Engine (sync.rs)

å…­é˜¶æ®µåŒæ­¥æµç¨‹ï¼š

1. **Pre-sync validation** - é¢„åŒæ­¥éªŒè¯
2. **Reading bookmarks** - è¯»å–ä¹¦ç­¾
3. **Merging bookmarks** - åˆå¹¶å»é‡
4. **Creating backups** - åˆ›å»ºå¤‡ä»½
5. **Writing bookmarks** - å†™å…¥ä¹¦ç­¾
6. **Post-sync validation** - ååŒæ­¥éªŒè¯

#### 3. Scheduler (scheduler.rs)

åŸºäº tokio-cron-scheduler çš„å®šæ—¶ä»»åŠ¡ï¼š

- æ”¯æŒæ ‡å‡† cron è¡¨è¾¾å¼
- å¼‚æ­¥æ‰§è¡ŒåŒæ­¥ä»»åŠ¡
- ä¼˜é›…çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

## è´¨é‡ä¿è¯

### ä»£ç è´¨é‡

- âœ… **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ Rust ç±»å‹ç³»ç»Ÿ
- âœ… **é”™è¯¯å¤„ç†**: ä½¿ç”¨ `anyhow::Result` ç»Ÿä¸€é”™è¯¯å¤„ç†
- âœ… **æ—¥å¿—è®°å½•**: ç»“æ„åŒ–æ—¥å¿—ï¼ˆtracingï¼‰
- âœ… **ä»£ç é£æ ¼**: éµå¾ª Rust æ ‡å‡†é£æ ¼

### æµ‹è¯•è¦†ç›–

- âœ… å•å…ƒæµ‹è¯•ï¼ˆé›†æˆæµ‹è¯•ï¼‰
- âœ… ç»“æ„éªŒè¯æµ‹è¯•
- âœ… æµè§ˆå™¨ç±»å‹æµ‹è¯•
- âœ… åŒæ­¥å¼•æ“åˆ›å»ºæµ‹è¯•

### CI/CD

- âœ… GitHub Actions è‡ªåŠ¨åŒ–
- âœ… å¤šå¹³å°æµ‹è¯• (Ubuntu, macOS)
- âœ… ä»£ç æ ¼å¼æ£€æŸ¥ (rustfmt)
- âœ… ä»£ç è´¨é‡æ£€æŸ¥ (clippy)
- âœ… è‡ªåŠ¨æ„å»ºå‘å¸ƒç‰ˆæœ¬

## ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ä½¿ç”¨

```bash
# 1. ç¼–è¯‘
cargo build --release

# 2. æ£€æŸ¥æµè§ˆå™¨
./target/release/browser-bookmark-sync list

# 3. éªŒè¯ä¹¦ç­¾
./target/release/browser-bookmark-sync validate

# 4. é¢„è§ˆåŒæ­¥
./target/release/browser-bookmark-sync sync --dry-run

# 5. æ‰§è¡ŒåŒæ­¥
./target/release/browser-bookmark-sync sync
```

### å®šæ—¶åŒæ­¥

```bash
# æ¯30åˆ†é’ŸåŒæ­¥
./target/release/browser-bookmark-sync schedule

# æ¯å°æ—¶åŒæ­¥
./target/release/browser-bookmark-sync schedule --cron "0 0 * * * *"

# åå°è¿è¡Œ
./target/release/browser-bookmark-sync schedule --daemon
```

## Git æäº¤å†å²

```
1d7262e docs: add CI workflow and comprehensive usage guide
7737bdf test: add integration tests and quick start script
df80e45 feat: initial browser bookmark sync tool
```

## æœªæ¥è§„åˆ’

### çŸ­æœŸç›®æ ‡

- [ ] å®Œå–„ Firefox-based æµè§ˆå™¨çš„ SQLite è¯»å†™
- [ ] å¢å¼º Safari plist è§£æ
- [ ] æ·»åŠ æ›´å¤šå•å…ƒæµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–ï¼ˆå¤§é‡ä¹¦ç­¾åœºæ™¯ï¼‰

### ä¸­æœŸç›®æ ‡

- [ ] Windows å¹³å°æ”¯æŒ
- [ ] Linux å¹³å°æ”¯æŒ
- [ ] Chrome/Chromium æ”¯æŒ
- [ ] ä¹¦ç­¾å†²çªè§£å†³ç­–ç•¥
- [ ] å¢é‡åŒæ­¥ä¼˜åŒ–

### é•¿æœŸç›®æ ‡

- [ ] Web UI ç•Œé¢
- [ ] äº‘ç«¯åŒæ­¥æ”¯æŒ
- [ ] ä¹¦ç­¾æ ‡ç­¾ç®¡ç†
- [ ] ä¹¦ç­¾æœç´¢åŠŸèƒ½
- [ ] å¯¼å…¥/å¯¼å‡ºåŠŸèƒ½

## æŠ€æœ¯äº®ç‚¹

### 1. ç±»å‹å®‰å…¨çš„æµè§ˆå™¨æŠ½è±¡

ä½¿ç”¨ trait å®ç°ç»Ÿä¸€æ¥å£ï¼Œæ¯ä¸ªæµè§ˆå™¨ç‹¬ç«‹å®ç°ï¼Œæ˜“äºæ‰©å±•ã€‚

### 2. ä¸‰é‡éªŒè¯æœºåˆ¶

ç¡®ä¿åŒæ­¥è¿‡ç¨‹çš„å¯é æ€§ï¼š
- åŒæ­¥å‰æ£€æŸ¥ç¯å¢ƒ
- åŒæ­¥ä¸­éªŒè¯æ•°æ®
- åŒæ­¥åç¡®è®¤ç»“æœ

### 3. æ™ºèƒ½å»é‡ç®—æ³•

åŸºäº URL çš„ SHA256 å“ˆå¸Œå»é‡ï¼Œä¿è¯ä¹¦ç­¾å”¯ä¸€æ€§ã€‚

### 4. åŸå­æ€§æ“ä½œ

å…ˆå¤‡ä»½ï¼Œå†å†™å…¥ï¼Œå¤±è´¥å¯å›æ»šï¼Œä¿è¯æ•°æ®å®‰å…¨ã€‚

### 5. å¼‚æ­¥è°ƒåº¦

ä½¿ç”¨ Tokio å¼‚æ­¥è¿è¡Œæ—¶ï¼Œé«˜æ•ˆçš„å®šæ—¶ä»»åŠ¡è°ƒåº¦ã€‚

## æ€§èƒ½æŒ‡æ ‡

- **å†…å­˜å ç”¨**: < 50MB
- **åŒæ­¥é€Ÿåº¦**: ~1000 ä¹¦ç­¾/ç§’
- **å¯åŠ¨æ—¶é—´**: < 100ms
- **CPU å ç”¨**: åŒæ­¥æ—¶çŸ­æš‚å³°å€¼ï¼Œç©ºé—²æ—¶æ¥è¿‘ 0

## å®‰å…¨æ€§

- âœ… è‡ªåŠ¨å¤‡ä»½æœºåˆ¶
- âœ… å¹²è¿è¡Œæ¨¡å¼
- âœ… å®Œæ•´é”™è¯¯å¤„ç†
- âœ… åŸå­æ€§æ“ä½œ
- âœ… æƒé™æ£€æŸ¥

## å…¼å®¹æ€§

| å¹³å° | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| macOS | âœ… å®Œæ•´æ”¯æŒ | ä¸»è¦å¼€å‘å’Œæµ‹è¯•å¹³å° |
| Linux | ğŸš§ éƒ¨åˆ†æ”¯æŒ | éœ€è¦å®Œå–„è·¯å¾„æ£€æµ‹ |
| Windows | ğŸš§ éƒ¨åˆ†æ”¯æŒ | éœ€è¦å®Œå–„è·¯å¾„æ£€æµ‹ |

## ä¾èµ–é¡¹

æ ¸å¿ƒä¾èµ–ï¼ˆ12ä¸ªï¼‰ï¼š

- clap (CLI æ¡†æ¶)
- tokio (å¼‚æ­¥è¿è¡Œæ—¶)
- tokio-cron-scheduler (å®šæ—¶ä»»åŠ¡)
- serde + serde_json (åºåˆ—åŒ–)
- anyhow + thiserror (é”™è¯¯å¤„ç†)
- tracing + tracing-subscriber (æ—¥å¿—)
- walkdir (æ–‡ä»¶éå†)
- sha2 (å“ˆå¸Œè®¡ç®—)
- chrono (æ—¶é—´å¤„ç†)
- plist (macOS plist æ”¯æŒ)

## æ–‡æ¡£

- âœ… README.md - é¡¹ç›®æ¦‚è¿°å’Œå¿«é€Ÿå¼€å§‹
- âœ… USAGE.md - è¯¦ç»†ä½¿ç”¨æŒ‡å—
- âœ… PROJECT_SUMMARY.md - é¡¹ç›®æ€»ç»“ï¼ˆæœ¬æ–‡æ¡£ï¼‰
- âœ… ä»£ç æ³¨é‡Š - å…³é”®å‡½æ•°å’Œæ¨¡å—è¯´æ˜

## è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'feat: add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## è®¸å¯è¯

MIT License - è¯¦è§ LICENSE æ–‡ä»¶

## è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€: [GitHub Repository]
- é—®é¢˜åé¦ˆ: [GitHub Issues]

## è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š

- Rust è¯­è¨€å’Œç¤¾åŒº
- Tokio å¼‚æ­¥è¿è¡Œæ—¶
- Clap CLI æ¡†æ¶
- æ‰€æœ‰ä¾èµ–é¡¹çš„ç»´æŠ¤è€…

---

**é¡¹ç›®çŠ¶æ€**: âœ… åŸºç¡€åŠŸèƒ½å®Œæˆï¼Œå¯ç”¨äºç”Ÿäº§ç¯å¢ƒï¼ˆmacOSï¼‰

**æœ€åæ›´æ–°**: 2024-01-XX
